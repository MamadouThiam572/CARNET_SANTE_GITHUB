<html th:replace="~{layout :: layout(~{::section}, null)}" xmlns:th="http://www.thymeleaf.org">
<section class="space-y-6 animate-in slide-in-from-bottom-5 duration-500">
    <div class="flex items-center justify-between">
        <h2 class="text-3xl font-black text-gray-900 tracking-tight" th:text="${t.calendar}">Rendez-vous</h2>
    </div>

    <div th:if="${appointments.empty}"
        class="bg-white p-8 rounded-[2.5rem] border-2 border-dashed border-gray-100 flex flex-col items-center justify-center text-center space-y-4">
        <div class="bg-emerald-50 p-6 rounded-full text-emerald-600">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                <line x1="16" y1="2" x2="16" y2="6" />
                <line x1="8" y1="2" x2="8" y2="6" />
                <line x1="3" y1="10" x2="21" y2="10" />
            </svg>
        </div>
        <div>
            <h3 class="font-black text-xl text-gray-900" th:text="${t.no_rdv_title}">Aucun rendez-vous</h3>
            <p class="text-gray-400 font-bold text-sm" th:text="${t.no_rdv_desc}">Vos futurs rendez-vous...</p>
        </div>
        <a th:href="@{/calendar/add}"
            class="bg-emerald-600 text-white px-8 py-3 rounded-2xl font-black shadow-lg shadow-emerald-100 active:scale-95 transition-all block"
            th:text="${t.take_rdv_btn}">
            Prendre rendez-vous
        </a>
    </div>

    <div th:if="${!appointments.empty}" class="space-y-4">
        <a th:href="@{/calendar/add}"
            class="bg-emerald-600 text-white px-5 py-4 rounded-3xl font-black shadow-lg shadow-emerald-200 active:scale-95 transition-all flex items-center justify-between group">
            <span class="text-lg" th:text="${t.new_rdv_btn}">Nouveau RDV</span>
            <span class="bg-white/20 p-2 rounded-xl group-hover:bg-white/30 transition-colors">+</span>
        </a>

        <div th:each="apt : ${appointments}"
            class="bg-white p-6 rounded-[2.5rem] border-2 border-gray-50 shadow-sm flex flex-col gap-3 relative overflow-hidden">

            <!-- Decorative -->
            <div class="absolute -right-4 -top-4 w-20 h-20 bg-emerald-50 rounded-full"></div>

            <div class="flex items-center justify-between relative z-10">
                <div class="flex gap-2">
                    <span class="bg-emerald-100 text-emerald-700 px-4 py-2 rounded-full text-sm font-black"
                        th:text="${#temporals.format(apt.dateTime, 'dd MMM HH:mm')}">Date</span>

                    <span th:if="${apt.profile != null}"
                        class="bg-indigo-100 text-indigo-700 px-3 py-2 rounded-full text-xs font-black uppercase tracking-wider"
                        th:text="${apt.profile.firstName}">Patient</span>
                </div>

                <div class="flex items-center gap-2">
                    <span class="text-xs font-bold text-gray-400 uppercase tracking-wider"
                        th:text="${apt.location}">Lieu</span>
                    <a th:href="@{'/calendar/delete/' + ${apt.id}}"
                        class="p-2 text-gray-300 hover:text-rose-500 transition-colors"
                        onclick="return confirm('Supprimer ce rendez-vous ?')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 6h18"></path>
                            <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                            <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                        </svg>
                    </a>
                </div>
            </div>

            <div class="relative z-10">
                <h3 class="font-black text-2xl text-gray-900 leading-tight" th:text="${apt.doctorName}">Dr. Nom</h3>
                <p class="text-gray-500 font-bold text-lg" th:text="${apt.specialty}">Spécialité</p>
            </div>

            <div th:if="${apt.notes != null and !apt.notes.empty}" class="bg-gray-50 p-4 rounded-2xl relative z-10">
                <p class="text-sm font-medium text-gray-500 italic" th:text="'Note: ' + ${apt.notes}">Notes...</p>
            </div>
        </div>
    </div>
</section>

</html>